<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guía Interactiva: Áreas de Brodmann</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals with Academic Accents -->
    <!-- Application Structure Plan: Se ha diseñado una aplicación de una sola página con un diseño de dos paneles. El panel izquierdo contiene controles de navegación y filtrado (por función y por lóbulo) y una lista dinámica de las áreas de Brodmann. El panel derecho muestra la información detallada del área seleccionada, organizada en pestañas (General, Relevancia Fonoaudiológica, Patologías). Esta estructura fue elegida porque es un patrón de UI/UX altamente intuitivo y eficiente para explorar grandes conjuntos de datos. Permite a los usuarios filtrar y seleccionar ítems sin perder el contexto, facilitando el estudio y la comparación. La organización en pestañas evita la sobrecarga de información en la vista de detalle, permitiendo al estudiante enfocarse en un aspecto a la vez. -->
    <!-- Visualization & Content Choices: 
        - Lista de Áreas (HTML/CSS + JS): Objetivo: Organizar/Navegar. Presentación: Lista interactiva y filtrable, con la Corteza Somatosensorial Primaria (1, 2, 3) y la Corteza Visual (17, 18, 19) fusionadas en entradas únicas.
        - Filtros por Función/Lóbulo (Botones HTML/CSS + JS): Objetivo: Categorizar. Presentar: Botones de colores y un selector. Interacción: Clic para filtrar la lista de áreas. Se mantiene el grupo 'Ejecutivo'.
        - Panel de Detalles (HTML/CSS + JS dinámico): Objetivo: Informar. Presentación: Bloques de texto, una imagen y pestañas que se actualizan dinámicamente. Interacción: El contenido cambia al seleccionar un área, usando la URL que el usuario inserte. Se ha ajustado el contenedor de imagen para soportar la relación de aspecto 1:1.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF8;
            color: #403d39;
        }
        .active-filter {
            transform: scale(1.05);
            box-shadow: 0 4px 14px 0 rgba(0,0=,0,0.1);
        }
        .active-tab {
            border-bottom-color: #4A5568;
            color: #2D3748;
            font-weight: 600;
        }
        .content-area::-webkit-scrollbar {
            width: 8px;
        }
        .content-area::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        .content-area::-webkit-scrollbar-thumb {
            background: #ccc;
            border-radius: 4px;
        }
        .content-area::-webkit-scrollbar-thumb:hover {
            background: #bbb;
        }
        .area-item:hover {
            background-color: #F0EFEB;
        }
        .area-item.selected {
            background-color: #EAE6E1;
            border-left: 4px solid #007BFF;
        }
        /* Nueva clase para forzar el aspecto 1:1 */
        .aspect-square {
            aspect-ratio: 1 / 1;
        }
        /* Colores específicos para el pie de foto de la corteza visual */
        .color-yellow { color: #FFD700; }
        .color-orange { color: #FF8C00; }
        .color-blue { color: #007BFF; }
    </style>
</head>
<body class="antialiased">
    <div id="app" class="min-h-screen flex flex-col">
        <header class="bg-white/80 backdrop-blur-md shadow-sm sticky top-0 z-10">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center max-w-7xl">
                <div>
                    <h1 class="text-2xl sm:text-3xl font-bold text-gray-800 tracking-tight">Guía Interactiva de las Áreas de Brodmann</h1>
                    <p class="text-sm sm:text-md text-gray-600 mt-1">Una herramienta para estudiantes de Fonoaudiología, por Daniela Ortiz y su amigaaa XXXXX.</p>
                </div>
                <!-- Logo de la Universidad (UDLA) - Aumentado a h-20 -->
                <div class="flex-shrink-0 ml-4">
                    <img src="https://chilestudia.com/wp-content/uploads/2022/04/Logo_UDLA.jpg" 
                         alt="Logo UDLA" 
                         class="h-20 w-auto object-contain p-1 rounded-lg"
                         onerror="this.onerror=null;this.src='https://placehold.co/100x40/003C6C/FFFFFF?text=UDLA';">
                </div>
            </div>
        </header>

        <main class="flex-grow container mx-auto p-4 sm:p-6 lg:p-8 max-w-7xl">
            <div class="flex flex-col md:flex-row gap-8 h-full">
                
                <!-- Columna de Navegación y Filtros -->
                <aside class="w-full md:w-1/3 lg:w-1/4 flex flex-col gap-6">
                    <div class="bg-white p-4 rounded-xl shadow-md">
                        <h2 class="font-bold text-lg mb-3 text-gray-700">Filtrar por Función</h2>
                        <div id="functional-filters" class="flex flex-wrap gap-2">
                            <!-- Los filtros se generan dinámicamente -->
                        </div>
                    </div>
                    
                    <div class="bg-white p-4 rounded-xl shadow-md flex-grow flex flex-col">
                        <h2 class="font-bold text-lg mb-3 text-gray-700">Áreas Cerebrales</h2>
                         <div class="mb-3">
                            <label for="lobe-filter" class="sr-only">Filtrar por Lóbulo</label>
                            <select id="lobe-filter" class="w-full p-2 border rounded-md bg-gray-50 focus:ring-2 focus:ring-blue-500">
                                <!-- Opciones generadas dinámicamente -->
                            </select>
                        </div>
                        <div id="area-list" class="flex-grow overflow-y-auto content-area pr-2 -mr-2 h-96 md:h-auto">
                            <!-- La lista de áreas se genera dinámicamente -->
                        </div>
                    </div>
                </aside>

                <!-- Columna de Contenido Principal -->
                <section id="content-display" class="w-full md:w-2/3 lg:w-3/4 bg-white p-6 sm:p-8 rounded-xl shadow-lg content-area overflow-y-auto">
                    <!-- El contenido se muestra aquí -->
                </section>

            </div>
        </main>

        <footer class="bg-white mt-8">
             <div class="container mx-auto px-8 py-4 text-center text-gray-500 text-sm max-w-7xl">
                <p>&copy; 2025 Guía Interactiva de Neuroanatomía. Creado como herramienta de estudio.</p>
            </div>
        </footer>
    </div>

    <script>
        // La URL de imagen placeholder será usada si no se proporciona una URL real.
        const PLACEHOLDER_IMG = "https://placehold.co/400x300/EAE6E1/403d39?text=Insertar+Imagen+Real";

        // DATOS AMPLIADOS Y ORDENADOS POR NÚMERO
        // *** URLs proporcionadas por el usuario están incrustadas a continuación ***
        const brodmannData = [
            // SENSORIAL PRIMARIA CONSOLIDADA (1, 2, 3)
            { id: "1, 2, 3", name: "Corteza Somatosensorial Primaria (S1)", gyrus: "Giro postcentral", lobe: "Parietal", func: "Recepción e integración unitaria de todas las sensaciones somestésicas: tacto fino, presión, dolor, temperatura y propiocepción.", speechRole: "Provee la retroalimentación sensorial esencial de los órganos fonoarticuladores (lengua, labios, mandíbula, faringe), permitiendo el control motor fino y los ajustes articulatorios. Vital para la fase oral de la deglución.", studyReason: "Su conocimiento es crucial para entender la base sensorial de la disartria y la disfagia orofaríngea. Los déficits en la percepción oral guían los planes de terapia sensorial.", disorders: "Agnosia táctil, pérdida de la propiocepción orofacial, afectando la precisión del habla y la seguridad deglutoria (ej. no sentir restos de comida).", references: "(1)", functionalGroup: "Sensorial", imageUrl: "https://upload.wikimedia.org/wikipedia/commons/c/ca/BA312_-_Primary_Somatosensory_Cortex_-_with_homunculus.gif" },
            
            // Motor Primaria (4)
            { id: 4, name: "Área Motora Primaria", gyrus: "Giro precentral", lobe: "Frontal", func: "Ejecución de movimientos voluntarios, finos y complejos (Homúnculo Motor).", speechRole: "Controla directamente los músculos de la laringe, faringe, paladar, lengua y labios para la articulación de los sonidos del habla.", studyReason: "Es el ejecutor final de los comandos motores del habla. Su estudio es fundamental para entender la disartria.", disorders: "Parálisis o paresia de los músculos del habla (disartria espástica o flácida, dependiendo de si la lesión es en la motoneurona superior o inferior).", references: "(2)", functionalGroup: "Motor", imageUrl: "https://upload.wikimedia.org/wikipedia/commons/4/47/Brodmann_area_4_animation.gif" },

            // Asociación Sensorial/Ejecutiva (5, 6, 7, 8)
            { id: 5, name: "Área Somatosensorial de Asociación", gyrus: "Lóbulo parietal superior", lobe: "Parietal", func: "Recibe e integra la información somatosensorial de S1. Conciencia espacial del cuerpo.", speechRole: "Integra la conciencia corporal y la posición espacial para guiar el movimiento de la escritura (grafomotricidad) y los gestos comunicativos.", studyReason: "Entender el componente propioceptivo de la comunicación y el control motor fino en actividades como la escritura.", disorders: "Síndrome de Negligencia Espacial (lesiones unilaterales), astereognosia.", references: "(1)", functionalGroup: "Sensorial", imageUrl: "https://upload.wikimedia.org/wikipedia/commons/2/29/BA5_-_animation.gif" },
            { id: 6, name: "Área Premotora y Motora Suplementaria", gyrus: "Giro frontal superior y medio", lobe: "Frontal", func: "Planificación, secuenciación y coordinación de movimientos complejos. Iniciación motora.", speechRole: "Organiza las secuencias motoras para palabras y frases (ej. 'ho-la'). La AMS es clave en la iniciación del habla y la fluidez.", studyReason: "Esencial para entender la apraxia del habla, un trastorno de la planificación motora, y los problemas de iniciación motora.", disorders: "Apraxia del habla (dificultad para planificar y secuenciar los movimientos del habla), mutismo acinético (lesión de AMS).", references: "(2)", functionalGroup: "Motor", imageUrl: "https://upload.wikimedia.org/wikipedia/commons/7/7e/Brodmann_area_6_animation_small.gif" },
            { id: 7, name: "Asociación Viso-Motora", gyrus: "Lóbulo parietal superior", lobe: "Parietal", func: "Coordinación ojo-mano, atención espacial y procesamiento viso-espacial.", speechRole: "Controla el seguimiento visual de un texto (lectura) y la integración de la visión con la acción manual (escritura).", studyReason: "Fundamental para la lectoescritura y el seguimiento de objetos o personas en el contexto comunicativo.", disorders: "Ataxia óptica (dificultad para guiar movimientos con la vista), dificultades de grafomotricidad.", references: "(3)", functionalGroup: "Visual", imageUrl: "https://upload.wikimedia.org/wikipedia/commons/e/e5/Brodmann_area7_-_animation.gif" },
            { id: 8, name: "Campos Oculares Frontales", gyrus: "Giro frontal medio", lobe: "Frontal", func: "Control de los movimientos oculares voluntarios (sacádicos).", speechRole: "Permite el escaneo y seguimiento de texto durante la lectura fluida. Es crucial para el contacto visual y la atención social en la comunicación.", studyReason: "Relación entre el control visual y los trastornos de lectura y atención (TDAH).", disorders: "Desviación tónica de la mirada hacia la lesión, apraxia oculomotora (dificultad para iniciar movimientos oculares voluntarios).", references: "(2)", functionalGroup: "Ejecutivo", imageUrl: "https://upload.wikimedia.org/wikipedia/commons/f/f8/Brodmann_area_8_animation_small.gif" },

            // Prefrontal Superior (9, 10, 11)
            { id: 9, name: "Corteza Prefrontal Dorsolateral", gyrus: "Giro frontal superior", lobe: "Frontal", func: "Memoria de trabajo, planificación, organización y monitorización de la conducta.", speechRole: "Es la base para mantener la información verbal activa (ej. seguir una conversación, comprender oraciones complejas o planificar un discurso).", studyReason: "Imprescindible para la evaluación y rehabilitación de los Trastornos de la Comunicación de Origen Cognitivo (TCOC).", disorders: "Déficits graves de memoria de trabajo, incapacidad para planificar y secuenciar tareas (disfunción ejecutiva).", references: "(2)", functionalGroup: "Ejecutivo", imageUrl: "https://upload.wikimedia.org/wikipedia/commons/e/e7/Brodmann_area_9_animation_small.gif" },
            { id: 10, name: "Corteza Prefrontal Anterior", gyrus: "Polo frontal", lobe: "Frontal", func: "Metacognición, razonamiento abstracto, integración de múltiples tareas y pensamiento futuro.", speechRole: "Regula la intención comunicativa, la autoconciencia en la conversación y la selección de estrategias pragmáticas.", studyReason: "Clave para entender la pragmática y la intencionalidad en la comunicación social.", disorders: "Apatía, dificultad en la toma de decisiones, alteraciones en la cognición social y la teoría de la mente.", references: "(2)", functionalGroup: "Ejecutivo", imageUrl: "https://upload.wikimedia.org/wikipedia/commons/5/5c/Brodmann_area_10_animation_small.gif" },
            { id: 11, name: "Corteza Orbitofrontal (Central)", gyrus: "Giro orbital", lobe: "Frontal", func: "Regulación emocional, inhibición de respuestas inapropiadas, procesamiento de recompensa.", speechRole: "Modula el comportamiento comunicativo social: inhibe comentarios fuera de lugar o regula el tono emocional de la voz.", studyReason: "Su disfunción se relaciona con la desinhibición verbal y la falta de tacto comunicativo, común en daño cerebral frontal.", disorders: "Desinhibición, impulsividad, cambios de personalidad, conductas obsesivo-compulsivas.", references: "(2)", functionalGroup: "Ejecutivo", imageUrl: "https://upload.wikimedia.org/wikipedia/commons/3/3d/Brodmann_area_11_animation_small.gif" },
            { id: 12, name: "Corteza Orbitofrontal (Límbica)", gyrus: "Giro orbital/Región subcallosa", lobe: "Frontal", func: "Regulación de la conducta emocional, procesamiento de riesgo/recompensa y control visceral (similar a A11).", speechRole: "Contribuye a la modulación del afecto, lo que afecta la prosodia emocional y la regulación de la interacción social y comunicativa.", studyReason: "Relevante para los trastornos de la comunicación asociados a la desregulación emocional.", disorders: "Dificultad en el procesamiento de emociones, conductas de riesgo en la toma de decisiones, alteraciones en la interacción social.", references: "(2)", functionalGroup: "Ejecutivo", imageUrl: "https://upload.wikimedia.org/wikipedia/commons/4/4c/Brodmann_area_12_animation_small.gif" },

            // VISUAL CONSOLIDADA (17, 18, 19)
            { id: "17, 18, 19", name: "Corteza Visual (Primaria y Asociación)", gyrus: "Cisura calcarina y áreas adyacentes", lobe: "Occipital", func: "Recepción (17), reconocimiento (18) e integración multisensorial (19) de estímulos visuales. Esencial para la percepción de formas, movimiento y profundidad.", speechRole: "La base neurobiológica de la lectoescritura, pues permite la decodificación de grafemas, el reconocimiento de palabras, el seguimiento visual del texto y la asociación de lo visto con el lenguaje (comprensión lectora).", studyReason: "Fundamental en el diagnóstico y terapia de la dislexia, alexia y agnosias visuales que impactan directamente la comunicación escrita.", disorders: "Ceguera cortical (lesión del área 17), Alexia Pura (incapacidad para leer sin otras afectaciones del lenguaje), Agnosia Visual (lesión 18/19, incapacidad para reconocer objetos, símbolos o gestos), Déficits en el seguimiento visual y la coordinación viso-espacial, esenciales para la lectura fluida.", references: "(3, 5)", functionalGroup: "Visual", imageUrl: "https://upload.wikimedia.org/wikipedia/commons/9/9d/BA17%2C18%2C19_-_Visual_cortex_%28V1%2C_V2%2C_V3%29_-_animation.gif" },
            
            // Temporal Inferior y Medio (20, 21, 22)
            { id: 20, name: "Giro Temporal Inferior", gyrus: "Giro temporal inferior", lobe: "Temporal", func: "Procesamiento avanzado de la información visual, incluyendo reconocimiento de objetos y caras.", speechRole: "Es parte de la ruta del 'qué' visual. Su función es crítica para la denominación (nombrar lo que se ve) y el reconocimiento de expresiones faciales (pragmática).", studyReason: "Relevante en la evaluación de anomias (dificultad para nombrar) y déficits de cognición social.", disorders: "Prosopagnosia (incapacidad para reconocer caras), agnosia visual asociativa.", references: "(3)", functionalGroup: "Visual", imageUrl: "" },
            { id: 21, name: "Giro Temporal Medio", gyrus: "Giro temporal medio", lobe: "Temporal", func: "Asociación y memoria. Procesamiento semántico de palabras y objetos.", speechRole: "Almacenamiento y recuperación del significado de palabras y conceptos, esencial para la fluidez y el acceso léxico.", studyReason: "Su disfunción contribuye a la anomia y las dificultades en el acceso al vocabulario.", disorders: "Anomia, dificultades de acceso léxico, alteraciones en la memoria semántica.", references: "(4)", functionalGroup: "Auditivo", imageUrl: "" },
            { id: 22, name: "Área de Wernicke (parte posterior)", gyrus: "Giro temporal superior", lobe: "Temporal", func: "Comprensión del lenguaje hablado y escrito.", speechRole: "Es el centro neurálgico para la decodificación fonológica y semántica del lenguaje. Permite entender lo que se oye o lee.", studyReason: "Es una de las áreas más críticas para la fonoaudiología. Su estudio es la base para entender las afasias comprensivas.", disorders: "Afasia de Wernicke (habla fluida pero sin sentido, jergafasia, pobre comprensión).", references: "(4)", functionalGroup: "Lenguaje", imageUrl: "" },
            
            // Asociación Parietal (39, 40)
            { id: 39, name: "Giro Angular", gyrus: "Giro angular", lobe: "Parietal", func: "Integración multisensorial para la lectoescritura (asociación grafema-fonema).", speechRole: "Conecta la información visual con la auditiva, permitiendo 'traducir' las letras en sonidos y viceversa. Es clave en la lectura.", studyReason: "Crucial para el aprendizaje y la terapia de la lectoescritura (dislexia, disgrafia).", disorders: "Síndrome de Gerstmann (agrafia, acalculia, agnosia digital, desorientación derecha-izquierda), alexia con agrafia.", references: "(5)", functionalGroup: "Lenguaje", imageUrl: "" },
            { id: 40, name: "Giro Supramarginal", gyrus: "Giro supramarginal", lobe: "Parietal", func: "Procesamiento fonológico y memoria de trabajo verbal.", speechRole: "Ayuda a 'retener' los sonidos de las palabras en la mente para poder procesarlos, repetirlos y manipularlos.", studyReason: "Importante para el desarrollo del lenguaje, la conciencia fonológica y la terapia de trastornos de los sonidos del habla.", disorders: "Afasia de conducción (dificultad para la repetición), disgrafia fonológica.", references: "(5)", functionalGroup: "Lenguaje", imageUrl: "" },

            // Auditivas Primaria/Secundaria/Gusto (41, 42, 43)
            { id: 41, name: "Corteza Auditiva Primaria", gyrus: "Giros transversos de Heschl", lobe: "Temporal", func: "Recepción y procesamiento de la información auditiva básica (tono, volumen, frecuencia).", speechRole: "Es el primer punto de llegada de la señal auditiva al cerebro. Permite 'oír' los sonidos del habla.", studyReason: "Base para entender el procesamiento auditivo central. Fundamental en audiología y terapia de trastornos del procesamiento auditivo.", disorders: "Sordera cortical, dificultades en la discriminación de sonidos.", references: "(6)", functionalGroup: "Auditivo", imageUrl: "" },
            { id: 42, name: "Corteza Auditiva Secundaria", gyrus: "Giro temporal superior", lobe: "Temporal", func: "Reconocimiento y asociación de sonidos complejos (fonemas, palabras).", speechRole: "Clasifica los sonidos auditivos como 'habla' o 'no habla' y comienza a identificar los fonemas, preparándolos para el área de Wernicke.", studyReason: "Clave para la percepción del habla y para diferenciar sonidos como /p/ y /b/.", disorders: "Agnosia auditiva (incapacidad para reconocer sonidos), afasia sensorial.", references: "(6)", functionalGroup: "Auditivo", imageUrl: "" },
            { id: 43, name: "Corteza Gustativa", gyrus: "Base del giro postcentral y opérculo parietal/insular", lobe: "Parietal/Insular", func: "Procesamiento consciente del gusto.", speechRole: "Esencial para el reflejo del gusto, que influye en la seguridad y las preferencias durante la fase oral de la deglución.", studyReason: "Directamente relacionada con la deglución y el manejo de residuos orales; su alteración puede impactar la ingesta.", disorders: "Ageusia (pérdida del gusto), disgeusia (distorsión del gusto), implicaciones en el rechazo alimentario.", references: "(1)", functionalGroup: "Sensorial", imageUrl: "" },

            // Área de Broca (44, 45) y Prefrontal Lateral (46, 47)
            { id: 44, name: "Área de Broca (Pars Opercularis)", gyrus: "Giro frontal inferior", lobe: "Frontal", func: "Planificación motora y articulación del habla.", speechRole: "Organiza los patrones motores finos y secuenciales para la producción fluida de sonidos, sílabas y palabras.", studyReason: "Área fundamental para la producción del habla. Su estudio es esencial para entender las afasias motoras y la apraxia.", disorders: "Afasia de Broca (habla no fluida, agramatismo, anomia, buena comprensión), apraxia del habla.", references: "(4)", functionalGroup: "Lenguaje", imageUrl: "" },
            { id: 45, name: "Área de Broca (Pars Triangularis)", gyrus: "Giro frontal inferior", lobe: "Frontal", func: "Procesamiento sintáctico, gramatical y semántico del lenguaje expresivo.", speechRole: "Ayuda a estructurar las oraciones con la gramática correcta (ej. 'el perro persigue al gato').", studyReason: "Importante para la terapia de agramatismo en afasias y para trastornos del desarrollo del lenguaje (TDL) con afectación sintáctica.", disorders: "Agramatismo, dificultades en la fluidez verbal y en la generación de oraciones complejas.", references: "(4)", functionalGroup: "Lenguaje", imageUrl: "" },
            { id: 46, name: "Corteza Prefrontal Dorsolateral", gyrus: "Giro frontal medio", lobe: "Frontal", func: "Control ejecutivo superior y mantenimiento del foco atencional.", speechRole: "Soporte de la memoria de trabajo verbal y no verbal. Esencial para el procesamiento sintáctico de oraciones largas y complejas.", studyReason: "Disfunción ligada a los déficits en la producción y comprensión de estructuras lingüísticas complejas.", disorders: "Déficit en la manipulación de información en línea, dificultades en la comprensión de estructuras incrustadas (sintaxis).", references: "(2)", functionalGroup: "Ejecutivo", imageUrl: "" },
            { id: 47, name: "Corteza Orbitofrontal (Lateral)", gyrus: "Giro frontal inferior", lobe: "Frontal", func: "Procesamiento de la sintaxis y la semántica, especialmente el lenguaje abstracto y la ambigüedad.", speechRole: "Trabaja en conjunto con Broca para la estructuración sintáctica, pero se enfoca más en el significado de palabras y frases ambiguas. Implicada en la prosodia.", studyReason: "Implicada en la prosodia y la capacidad de interpretación del lenguaje figurado, áreas cruciales en la pragmática.", disorders: "Problemas en la interpretación de metáforas, ambigüedad semántica, y posibles déficits prosódicos.", references: "(4)", functionalGroup: "Lenguaje", imageUrl: "" },
        ];

        const functionalGroups = {
            "Motor": { color: "bg-red-500", name: "Motor" },
            "Sensorial": { color: "bg-blue-500", name: "Sensorial" },
            "Lenguaje": { color: "bg-green-500", name: "Lenguaje" },
            "Visual": { color: "bg-purple-500", name: "Visual" },
            "Auditivo": { color: "bg-yellow-500", name: "Auditivo" },
            "Ejecutivo": { color: "bg-indigo-500", name: "Ejecutivo" },
            "Todos": { color: "bg-gray-500", name: "Todos" }
        };

        const lobes = ["Todos", "Frontal", "Parietal", "Temporal", "Occipital", "Insular"];

        let currentFilters = {
            group: "Todos",
            lobe: "Todos"
        };
        let selectedAreaId = "1, 2, 3"; // Selecciona un área por defecto para que se vea contenido inicial

        document.addEventListener('DOMContentLoaded', () => {
            const functionalFiltersContainer = document.getElementById('functional-filters');
            const lobeFilterSelect = document.getElementById('lobe-filter');
            const areaListContainer = document.getElementById('area-list');
            const contentDisplay = document.getElementById('content-display');

            function setupFilters() {
                // Crear botones de filtro funcional
                Object.values(functionalGroups).forEach(group => {
                    const button = document.createElement('button');
                    button.textContent = group.name;
                    button.dataset.group = group.name;
                    button.className = `px-3 py-1 text-sm font-medium text-white rounded-full transition-transform duration-200 ${group.color} hover:opacity-90`;
                    button.addEventListener('click', () => {
                        currentFilters.group = group.name;
                        updateActiveFilters();
                        renderAreaList();
                    });
                    functionalFiltersContainer.appendChild(button);
                });

                // Crear opciones de filtro por lóbulo
                lobes.forEach(lobe => {
                    const option = document.createElement('option');
                    option.value = lobe;
                    option.textContent = `Lóbulo ${lobe}`;
                    lobeFilterSelect.appendChild(option);
                });
                lobeFilterSelect.addEventListener('change', (e) => {
                    currentFilters.lobe = e.target.value;
                    renderAreaList();
                });
            }

            function updateActiveFilters() {
                document.querySelectorAll('#functional-filters button').forEach(btn => {
                    if (btn.dataset.group === currentFilters.group) {
                        btn.classList.add('active-filter');
                    } else {
                        btn.classList.remove('active-filter');
                    }
                });
            }
            
            function renderAreaList() {
                areaListContainer.innerHTML = '';
                // 1. Filtrar
                let filteredData = brodmannData.filter(area => {
                    const groupMatch = currentFilters.group === "Todos" || area.functionalGroup === currentFilters.group;
                    // Manejar las áreas que están en dos lóbulos (ej. Parietal/Insular)
                    const lobeMatch = currentFilters.lobe === "Todos" || area.lobe.includes(currentFilters.lobe); 
                    return groupMatch && lobeMatch;
                });
                
                // 2. Renderizar
                if(filteredData.length === 0){
                    areaListContainer.innerHTML = `<p class="text-gray-500 p-4 text-center">No hay áreas que coincidan con los filtros seleccionados.</p>`;
                    return;
                }

                filteredData.forEach(area => {
                    const item = document.createElement('div');
                    item.className = `area-item p-3 cursor-pointer rounded-lg border-l-4 border-transparent transition-all duration-200 ${selectedAreaId === area.id ? 'selected' : ''}`;
                    item.dataset.id = area.id;
                    item.innerHTML = `
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <span class="w-5 h-5 mr-3 rounded-full ${functionalGroups[area.functionalGroup].color}"></span>
                                <div>
                                    <p class="font-semibold text-gray-800">Área ${area.id}</p>
                                    <p class="text-xs text-gray-500">${area.name}</p>
                                </div>
                            </div>
                        </div>
                    `;
                    item.addEventListener('click', () => {
                        selectedAreaId = area.id;
                        renderContent(area.id);
                        document.querySelectorAll('.area-item').forEach(el => el.classList.remove('selected'));
                        item.classList.add('selected');
                    });
                    areaListContainer.appendChild(item);
                });
            }

            function renderContent(areaId) {
                const area = brodmannData.find(a => a.id === areaId);
                // Si la URL está vacía (""), usamos el placeholder. De lo contrario, usamos la URL real.
                const imageUrl = area && area.imageUrl && area.imageUrl !== '' ? area.imageUrl : PLACEHOLDER_IMG;


                if (!area) {
                     // Solo si no hay área seleccionada Y no es la carga inicial
                    if (selectedAreaId === null) {
                        contentDisplay.innerHTML = `
                            <div class="flex flex-col items-center justify-center h-full text-center py-12">
                                <svg class="w-16 h-16 text-gray-300 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg>
                                <h2 class="text-2xl font-bold text-gray-700">Bienvenido a la Guía Interactiva</h2>
                                <p class="mt-2 text-gray-500 max-w-md">Selecciona un área de la lista de la izquierda para ver su descripción detallada.</p>
                            </div>
                        `;
                    }
                    return;
                }
                
                // Generar el texto de ayuda visual solo para el área 17, 18, 19
                let visualHelpText = '';
                if (area.id === "17, 18, 19") {
                    visualHelpText = `
                        <p class="mt-1 text-xs text-gray-500 text-center">
                            <strong>AB17:</strong> <span class="color-yellow font-semibold">Amarillo</span>, 
                            <strong>AB18:</strong> <span class="color-orange font-semibold">Naranja</span> y 
                            <strong>AB19:</strong> <span class="color-blue font-semibold">Azul</span>.
                        </p>
                    `;
                }


                contentDisplay.innerHTML = `
                    <div class="flex flex-col lg:flex-row gap-8">
                        <div class="w-full lg:w-1/3">
                            <!-- Contenedor con aspecto cuadrado forzado (aspect-square) -->
                            <div class="aspect-square w-full rounded-lg shadow-md overflow-hidden bg-gray-100"> 
                                <img src="${imageUrl}" onerror="this.onerror=null; this.src='${PLACEHOLDER_IMG}';" alt="Representación del Área ${area.id}" class="w-full h-full object-contain">
                            </div>
                            <!-- Crédito de imagen -->
                            <p class="mt-2 text-xs text-gray-400 text-center">Imagen: Wikipedia. Autor: Polygon data were generated by Database Center for Life Science.</p>
                            <!-- Leyenda de colores -->
                            ${visualHelpText}
                        </div>
                        <div class="w-full lg:w-2/3">
                             <span class="inline-block px-3 py-1 text-sm font-semibold text-white ${functionalGroups[area.functionalGroup].color} rounded-full mb-2">${area.functionalGroup}</span>
                            <h2 class="text-3xl font-bold text-gray-800">Área de Brodmann ${area.id}</h2>
                            <p class="text-xl text-gray-600 mt-1">${area.name}</p>
                            <p class="text-lg text-gray-500 mt-2"><strong>Lóbulo:</strong> ${area.lobe} | <strong>Giro:</strong> ${area.gyrus}</p>
                        </div>
                    </div>

                    <div class="mt-8">
                        <div class="border-b border-gray-200">
                            <nav id="content-tabs" class="-mb-px flex space-x-6" aria-label="Tabs">
                                <button data-tab="general" class="tab-button whitespace-nowrap py-4 px-1 border-b-2 font-medium text-base border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 active-tab">Generalidades</button>
                                <button data-tab="fono" class="tab-button whitespace-nowrap py-4 px-1 border-b-2 font-medium text-base border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">Relevancia Fonoaudiológica</button>
                                <button data-tab="patho" class="tab-button whitespace-nowrap py-4 px-1 border-b-2 font-medium text-base border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">Patologías</button>
                            </nav>
                        </div>
                        <div id="tab-content" class="py-6">
                            <!-- Contenido de las pestañas -->
                        </div>
                    </div>
                `;
                
                const tabsContainer = document.getElementById('content-tabs');
                tabsContainer.addEventListener('click', (e) => {
                    if (e.target.matches('.tab-button')) {
                        const tabName = e.target.dataset.tab;
                        document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active-tab'));
                        e.target.classList.add('active-tab');
                        renderTabContent(area, tabName);
                    }
                });

                renderTabContent(area, 'general');
            }

            function renderTabContent(area, tabName) {
                const tabContentContainer = document.getElementById('tab-content');
                let content = '';
                switch (tabName) {
                    case 'general':
                        content = `
                            <h3 class="text-xl font-semibold text-gray-700 mb-3">Función Principal</h3>
                            <p class="text-lg text-gray-600 leading-relaxed">${area.func}</p>
                        `;
                        break;
                    case 'fono':
                        content = `
                            <h3 class="text-xl font-semibold text-gray-700 mb-3">Rol Fonoaudiológico</h3>
                            <p class="text-lg text-gray-600 leading-relaxed mb-4">${area.speechRole}</p>
                            <h3 class="text-xl font-semibold text-gray-700 mb-3">¿Por qué estudiarla?</h3>
                            <p class="text-lg text-gray-600 leading-relaxed">${area.studyReason}</p>
                        `;
                        break;
                    case 'patho':
                        content = `
                             <h3 class="text-xl font-semibold text-gray-700 mb-3">Trastornos y Semiología Asociados</h3>
                            <p class="text-lg text-gray-600 leading-relaxed">${area.disorders}</p>
                        `;
                        break;
                }
                
                content += `<div class="mt-8 text-sm text-gray-400">
                                <h4 class="font-semibold">Referencias (Vancouver):</h4>
                                <p>1. Kandel, E. R., Schwartz, J. H., & Jessell, T. M. (2000). Principles of Neural Science. McGraw-Hill.</p>
                                <p>2. Bear, M. F., Connors, B. W., & Paradiso, M. A. (2016). Neuroscience: Exploring the Brain. Wolters Kluwer.</p>
                                <p>3. Gazzaniga, M. S., Ivry, R. B., & Mangun, G. R. (2014). Cognitive Neuroscience: The Biology of the Mind. W.W. Norton & Company.</p>
                                <p>4. Goodglass, H., & Kaplan, E. (1983). The assessment of aphasia and related disorders. Lea & Febiger.</p>
                                <p>5. Dehaene, S. (2009). Reading in the Brain: The New Science of How We Read. Penguin Books.</p>
                                <p>6. Poeppel, D., & Hickok, G. (2004). Towards a new functional anatomy of language. Cognition, 92(1-2), 1-12.</p>
                           </div>`;

                tabContentContainer.innerHTML = content;
            }

            setupFilters();
            updateActiveFilters();
            renderAreaList();
            renderContent(selectedAreaId); // Renderiza el área 1, 2, 3 al inicio
        });
    </script>
</body>
</html>

